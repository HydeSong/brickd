(self.webpackChunkbrickd=self.webpackChunkbrickd||[]).push([[8947],{78947:function(m,S,i){"use strict";i.r(S),i.d(S,{Mentions:function(){return p},default:function(){return I}});var b=i(335),y=i.n(b),a=i(48305),l=i.n(a),t=i(75271),s={mentions:"TGcwjL07MiAFmu7lfP43",mentionsInput:"lIcbSHgvOq8df0Jq5xlM",mentionsInputDisabled:"k2nOxQjFGwmOLdCf1o2U",mentionsInputSizeSmall:"uBvYTWJbidMIRx0yWJgU",mentionsInputSizeLarge:"Rh5KzYUjmocNqsYAHMnI",mentionsMenu:"PzNtseGHN5sgtJlPgtId",mentionsMenuItem:"TXokGLJpgkgGlgKy0_e7",mentionsMenuItemActive:"KJGvNJpmElkQsFQU9Ux5",mentionsMenuItemDisabled:"J0eGQ8YtIj0Yl2qhYXmI",mentionsTag:"lgXq9QmRDRYh2Ijvh1Ax",mentionsTagWithClose:"qndlEjReIS8oHiSaZsrS",mentionsTagClose:"Cux0CxlKwEcntUoxVj5N",mentionsLoading:"rXNdh8_jLWgPC7Rr9doP",mentionsEmpty:"AHdFmIpkURbotAP1rcw9"},o=i(52676),p=function(n){var u=n.size,C=u===void 0?"default":u,R=n.disabled,T=R===void 0?!1:R,M=n.value,H=n.defaultValue,le=H===void 0?"":H,U=n.options,oe=U===void 0?[]:U,V=n.onChange,$=n.onSelect,z=n.placeholder,F=z===void 0?"\u8BF7\u8F93\u5165\u5185\u5BB9":z,J=n.prefix,j=J===void 0?"@":J,G=n.split,ce=G===void 0?" ":G,K=n.className,de=K===void 0?"":K,Y=n.style,fe=Y===void 0?{}:Y,ve=(0,t.useState)(le),P=l()(ve,2),Q=P[0],W=P[1],me=(0,t.useState)(!1),X=l()(me,2),B=X[0],h=X[1],pe=(0,t.useState)(0),Z=l()(pe,2),k=Z[0],A=Z[1],he=(0,t.useState)([]),q=l()(he,2),f=q[0],_=q[1],Ie=(0,t.useState)(""),ee=l()(Ie,2),O=ee[0],ge=ee[1],Se=(0,t.useState)(""),te=l()(Se,2),be=te[0],ne=te[1],w=(0,t.useRef)(null),E=(0,t.useRef)(null);(0,t.useEffect)(function(){M!==void 0&&W(M)},[M]);var ye=function(e){var r=e.target,d=r.textContent||"";ne(d);var N=Array.isArray(j)?j:[j],v=!1,g=y()(N),ae;try{var je=function(){var D=ae.value,ie=d.lastIndexOf(D);if(ie!==-1){var L=d.substring(ie+D.length);if(!L.includes(" ")&&!L.includes(`
`)){ge(D),h(!0);var ke=oe.filter(function(ue){return!ue.disabled&&ue.label.toLowerCase().includes(L.toLowerCase())});return _(ke),A(0),v=!0,1}}};for(g.s();!(ae=g.n()).done&&!je(););}catch(se){g.e(se)}finally{g.f()}v||h(!1)},re=function(e){if(!e.disabled){var r=be,d=r.lastIndexOf(O);if(d!==-1){var N=r.substring(0,d),v="".concat(N).concat(O).concat(e.value).concat(ce);ne(v),W(v),V&&V(v),$&&$(e,O)}h(!1),_([])}},xe=function(e){if(B)switch(e.key){case"ArrowDown":e.preventDefault(),A(function(r){return r<f.length-1?r+1:0});break;case"ArrowUp":e.preventDefault(),A(function(r){return r>0?r-1:f.length-1});break;case"Enter":e.preventDefault(),f[k]&&re(f[k]);break;case"Escape":e.preventDefault(),h(!1);break;default:break}};(0,t.useEffect)(function(){var c=function(r){w.current&&!w.current.contains(r.target)&&E.current&&!E.current.contains(r.target)&&h(!1)};return document.addEventListener("mousedown",c),function(){document.removeEventListener("mousedown",c)}},[]);var Ce=function(){var e=[s.mentionsInput];return C!=="default"&&e.push(s["mentionsInputSize".concat(C.charAt(0).toUpperCase()+C.slice(1))]),T&&e.push(s.mentionsInputDisabled),e.join(" ")},Me=function(){return!B||f.length===0?null:(0,o.jsx)("div",{ref:E,className:s.mentionsMenu,children:f.map(function(e,r){return(0,o.jsx)("div",{className:"".concat(s.mentionsMenuItem," ").concat(r===k?s.mentionsMenuItemActive:""," ").concat(e.disabled?s.mentionsMenuItemDisabled:""),onClick:function(){return re(e)},children:e.label},e.value)})})};return(0,o.jsxs)("div",{className:"".concat(s.mentions," ").concat(de),style:fe,children:[(0,o.jsx)("div",{ref:w,className:Ce(),contentEditable:!T,suppressContentEditableWarning:!0,onInput:ye,onKeyDown:xe,dangerouslySetInnerHTML:{__html:Q||""}}),!Q&&F&&(0,o.jsx)("div",{className:s.placeholder,children:F}),Me()]})},I=p},335:function(m,S,i){var b=i(31479);function y(a,l){var t=typeof Symbol!="undefined"&&a[Symbol.iterator]||a["@@iterator"];if(!t){if(Array.isArray(a)||(t=b(a))||l&&a&&typeof a.length=="number"){t&&(a=t);var s=0,o=function(){};return{s:o,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var p=!0,I=!1,x;return{s:function(){t=t.call(a)},n:function(){var u=t.next();return p=u.done,u},e:function(u){I=!0,x=u},f:function(){try{!p&&t.return!=null&&t.return()}finally{if(I)throw x}}}}m.exports=y,m.exports.__esModule=!0,m.exports.default=m.exports}}]);
